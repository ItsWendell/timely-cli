{"version":3,"sources":["../src/app (old).js"],"names":["App","commander","ui","inquirer","registerPrompt","AutocompletePrompt","use","SystemCommands","storage","init","console","error","TimelyAPI","authenticate","then","log","AccountsCommands","account","ProjectsCommands","EntriesCommands","delimiter","name","show","catch","LoginCommands","exec","EventEmitter"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;;;IAEaA,G,WAAAA,G;;;AACZ,gBAAc;AAAA;;AAAA;;AAEb,QAAKC,SAAL,GAAiB,uBAAjB;AACA,QAAKA,SAAL,CAAeC,EAAf,CAAkBC,QAAlB,CAA2BC,cAA3B,CAA0C,cAA1C,EAA0DC,oCAA1D;;AAEA,QAAKJ,SAAL,CAAeK,GAAf,CAAmBC,gBAAnB;AALa;AAMb;;;;;;;;;;;;eAIOC,sBAAQC,IAAR,E;;;;;;;;;;AAENC,gBAAQC,KAAR;;;;;;;;;;;;;;;;;;iCAIa;AAAA;;AAAA,OACNV,SADM,GACQ,IADR,CACNA,SADM;;;AAGdW,oBAAUC,YAAV,GAAyBC,IAAzB,CAA8B,YAAM;AACnCJ,YAAQK,GAAR,CAAY,iCAAZ;AACAd,cAAUK,GAAV,CAAcU,kBAAd;;AAEA,QAAIJ,iBAAUK,OAAd,EAAuB;AACtBhB,eAAUK,GAAV,CAAcY,kBAAd;AACAjB,eAAUK,GAAV,CAAca,iBAAd;;AAEAlB,eAAUmB,SAAV,eAAgCR,iBAAUK,OAAV,CAAkBI,IAAlD;AACA;AACDpB,cAAUqB,IAAV;AACA,IAXD,EAWGC,KAXH,yDAWS;AAAA;AAAA;AAAA;AAAA;AACRb,gBAAQK,GAAR,CAAY,kCAAZ;AACAd,kBAAUK,GAAV,CAAckB,eAAd;AACAvB,kBAAUmB,SAAV,CAAoB,EAApB,EAAwBE,IAAxB;AACArB,kBAAUwB,IAAV,CAAe,OAAf,EAAwBX,IAAxB,CAA6B,YAAM;AAClCb,mBAAUK,GAAV,CAAcU,kBAAd;AACAf,mBAAUwB,IAAV,CAAe,iBAAf,EAAkCX,IAAlC,CAAuC,YAAM;AAC5Cb,oBAAUK,GAAV,CAAcY,kBAAd;AACAjB,oBAAUqB,IAAV;AACA,UAHD;AAIA,SAND,EAMGC,KANH,CAMS,YAAM,CAEd,CARD;AASA;;AAbQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXT;AA0BA;;;;EA9CuBG,oB;;kBAiDV,IAAI1B,GAAJ,E","file":"app (old).js","sourcesContent":["import vorpal from 'vorpal';\nimport storage from 'node-persist';\nimport TimelyAPI from './timely';\nimport { EventEmitter } from 'events';\nimport AutocompletePrompt from 'inquirer-autocomplete-prompt';\n\nimport LoginCommands from './commands/login';\nimport AccountsCommands from './commands/accounts';\nimport ProjectsCommands from './commands/projects';\nimport EntriesCommands from './commands/entries';\nimport SystemCommands from './commands/system';\n\nexport class App extends EventEmitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.commander = vorpal();\n\t\tthis.commander.ui.inquirer.registerPrompt('autocomplete', AutocompletePrompt);\n\n\t\tthis.commander.use(SystemCommands);\n\t}\n\n\tasync initialize() {\n\t\ttry {\n\t\t\tawait storage.init();\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n\n\tauthenticate() {\n\t\tconst { commander } = this;\n\n\t\tTimelyAPI.authenticate().then(() => {\n\t\t\tconsole.log('Welcome back to the Timely CLI!');\n\t\t\tcommander.use(AccountsCommands);\n\n\t\t\tif (TimelyAPI.account) {\n\t\t\t\tcommander.use(ProjectsCommands);\n\t\t\t\tcommander.use(EntriesCommands);\n\n\t\t\t\tcommander.delimiter(` ~Timely/${TimelyAPI.account.name} >`);\n\t\t\t}\n\t\t\tcommander.show();\n\t\t}).catch(async () => {\n\t\t\tconsole.log(\"You're not logged in Timely yet!\");\n\t\t\tcommander.use(LoginCommands);\n\t\t\tcommander.delimiter('').show();\n\t\t\tcommander.exec('login').then(() => {\n\t\t\t\tcommander.use(AccountsCommands);\n\t\t\t\tcommander.exec('accounts select').then(() => {\n\t\t\t\t\tcommander.use(ProjectsCommands);\n\t\t\t\t\tcommander.show();\n\t\t\t\t});\n\t\t\t}).catch(() => {\n\n\t\t\t});\n\t\t\t// commander.show();\n\t\t});\n\t}\n}\n\nexport default new App();\n"]}